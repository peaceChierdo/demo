<!DOCTYPE html>
<html>
<head>
    <title>图片懒加载</title>
    <meta charset="utf-8">
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <style>
    ul,li{
      list-style:none;
    }
    .container{
      width: 600px;
      margin: 0 auto;
    }
    .container li{
      float: left;
      margin: 10px 10px;
    }
    .container li img{
      width: 240px;
      height: 180px;
    }
    p{
      float: left;
    }
  </style>
   
</head>
<body>
<ul class="container">
 <li><a href="#"><img src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg"></a></li>
  <li><a href="#"><img src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg"></a></li>
  <li><a href="#"><img src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg"></a></li>
  <li><a href="#"><img id="a" src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg"></a></li>
  <li><a href="#"><img src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg"></a></li>
  <li><a href="#"><img src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg"></a></li>
  <li><a href="#"><img src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg"></a></li>
  <li><a href="#"><img src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg"></a></li>
  <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg"></a></li>
  <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg"></a></li>
  <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg"></a></li>
  <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/12.jpg"></a></li>
  <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/13.jpg"></a></li>
  <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/14.jpg"></a></li>
  <li><a href="#"><img id="b" src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/15.jpg"></a></li>
  <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" data-src="http://cdn.jirengu.com/book.jirengu.com/img/16.jpg"></a></li>

</ul>

<script>
  var clock
  $(window).on('scroll',function(){
    if(clock){     //只加载最后滚动到的地方
      clearTimeout(clock)
    }
    clock = setTimeout(function(){
      console.log('hello')
      lazyRender()
    },300)
    
  })

  function lazyRender() {
    $('.container img').each(function(){
      if( checkShow($(this)) && !isLoaded($(this)) ){
        loadImg($(this))
      }
    }) 
  }

  function checkShow($node){
    var scrollTop = $(window).scrollTop()
    var windowHeight = $(window).height()
    var offsetTop = $node.offset().top
    if(offsetTop < scrollTop + windowHeight && offsetTop > scrollTop) {
      return true
    }
    return false
  }
  function isLoaded($img) {
      return $img.attr('src') === $img.attr('data-src')
    }

  function loadImg($img){
    $img.attr('src', $img.attr('data-src'))
  }

</script>
</body>
</html>